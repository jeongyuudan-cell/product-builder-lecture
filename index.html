
<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>AI ê³¨ê²© ì²´í˜• ì§„ë‹¨ ì„œë¹„ìŠ¤</title>

<style>
:root {
    --bg-color: #f8fafc;
    --container-bg: rgba(255, 255, 255, 0.95);
    --text-color: #1e293b;
    --primary: #6366f1;
    --heading-gradient: linear-gradient(to right, #4f46e5, #9333ea);
    --border-color: rgba(0, 0, 0, 0.1);
}

body.dark-mode {
    --bg-color: #0f172a;
    --container-bg: rgba(30, 41, 59, 0.8);
    --text-color: #f8fafc;
    --primary: #818cf8;
    --heading-gradient: linear-gradient(to right, #60a5fa, #a78bfa);
    --border-color: rgba(255, 255, 255, 0.1);
}

body {
    font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
    background: var(--bg-color);
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
    min-height: 100vh;
    color: var(--text-color);
    transition: all 0.3s ease;
}

.theme-toggle {
    position: fixed; top: 20px; right: 20px; width: 45px; height: 45px;
    border-radius: 50%; display: flex; align-items: center; justify-content: center;
    cursor: pointer; background: var(--container-bg); border: 1px solid var(--border-color);
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); font-size: 20px; z-index: 1000;
}

.container {
    width: 90%; max-width: 600px; margin: 40px 0;
}

/* Step Management */
.step { display: none; animation: fadeIn 0.5s ease; }
.step.active { display: block; }

@keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

.card {
    background: var(--container-bg); backdrop-filter: blur(16px);
    padding: 2.5rem; border-radius: 2rem; border: 1px solid var(--border-color);
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.2); text-align: center;
}

h1 {
    font-size: 2rem; font-weight: 800; background: var(--heading-gradient);
    -webkit-background-clip: text; -webkit-text-fill-color: transparent; margin-bottom: 1rem;
}

.intro-text { text-align: left; line-height: 1.6; margin-bottom: 2rem; font-size: 0.95rem; }
.info-box {
    background: rgba(99, 102, 241, 0.05); border-radius: 1rem; padding: 1.5rem;
    margin-bottom: 1.5rem; border: 1px solid var(--border-color);
}

.type-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin: 1.5rem 0; }
.type-item { padding: 10px; border-radius: 10px; background: rgba(0,0,0,0.03); font-size: 0.8rem; font-weight: 700; }

.main-btn {
    width: 100%; padding: 1.2rem; border-radius: 1rem; border: none;
    background: var(--primary); color: white; font-weight: 800; font-size: 1.1rem;
    cursor: pointer; transition: all 0.2s; box-shadow: 0 10px 15px -3px rgba(99, 102, 241, 0.3);
}
.main-btn:hover { transform: translateY(-2px); filter: brightness(1.1); }

/* Analysis UI */
.upload-zone {
    border: 2px dashed var(--primary); border-radius: 1.5rem; padding: 3rem 1rem;
    margin: 2rem 0; cursor: pointer; transition: 0.2s;
}
.upload-zone:hover { background: rgba(99, 102, 241, 0.05); }

#previewImg { width: 100%; max-height: 400px; object-fit: contain; border-radius: 1rem; display: none; margin-bottom: 1rem; }

.loading-container { margin: 2rem 0; display: none; }
.spinner {
    width: 40px; height: 40px; border: 4px solid rgba(0,0,0,0.1); border-top-color: var(--primary);
    border-radius: 50%; animation: spin 1s linear infinite; margin: 0 auto 1rem;
}
@keyframes spin { to { transform: rotate(360deg); } }

.log-text { font-size: 0.8rem; color: var(--primary); font-family: monospace; height: 20px; }

/* Results */
.prediction-item { margin-bottom: 1.5rem; text-align: left; }
.prediction-label { display: flex; justify-content: space-between; margin-bottom: 5px; font-weight: 700; }
.progress-bg { height: 12px; background: rgba(0,0,0,0.1); border-radius: 6px; overflow: hidden; }
.progress-fill { height: 100%; background: var(--primary); width: 0%; transition: width 1s ease; }

.desc-box {
    margin-top: 2rem; padding: 1.5rem; background: rgba(0,0,0,0.05);
    border-radius: 1rem; text-align: left; font-size: 0.9rem; border-left: 4px solid var(--primary);
}

.footer-sections { margin-top: 4rem; }
</style>
</head>
<body>

<div class="theme-toggle" onclick="toggleTheme()">ğŸŒ“</div>

<div class="container">
    
    <!-- STEP 1: Intro -->
    <section id="step1" class="step active">
        <div class="card">
            <h1>ğŸ§¬ AI ê³¨ê²© ì²´í˜• ì§„ë‹¨</h1>
            <p style="opacity: 0.7; margin-bottom: 2rem;">ìˆ˜í•™ì  ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ ë¶„ì„í•˜ëŠ” ë‚˜ë§Œì˜ ìŠ¤íƒ€ì¼ë§</p>
            
            <div class="intro-text">
                <div class="info-box">
                    <strong>ğŸ” AI ì§„ë‹¨ ì›ë¦¬</strong><br>
                    ë³¸ ì„œë¹„ìŠ¤ëŠ” <b>MediaPipe</b> ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í†µí•´ ì‚¬ìš©ìì˜ ì£¼ìš” ëœë“œë§ˆí¬(ì–´ê¹¨, í—ˆë¦¬, ê³¨ë°˜ ë“±)ë¥¼ ì¶”ì¶œí•˜ê³ , ì‹ ì²´ ë¶€ìœ„ë³„ ê¸°í•˜í•™ì  ë¹„ìœ¨ì„ ê³„ì‚°í•˜ì—¬ ì²´í˜•ì„ ë¶„ë¥˜í•©ë‹ˆë‹¤.
                </div>

                <p><strong>ğŸ‘— ì§„ë‹¨ ëŒ€ìƒ ì²´í˜•</strong></p>
                <div class="type-grid">
                    <div class="type-item">ğŸ’ ìŠ¤íŠ¸ë ˆì´íŠ¸<br><span style="font-weight: normal; font-size: 0.7rem;">ìƒì²´ ì¤‘ì‹¬</span></div>
                    <div class="type-item">ğŸŒ¸ ì›¨ì´ë¸Œ<br><span style="font-weight: normal; font-size: 0.7rem;">í•˜ì²´ ì¤‘ì‹¬</span></div>
                    <div class="type-item">ğŸŒ¿ ë‚´ì¶”ëŸ´<br><span style="font-weight: normal; font-size: 0.7rem;">ê³¨ê²© ì¤‘ì‹¬</span></div>
                </div>

                <ul style="padding-left: 20px; font-size: 0.85rem; opacity: 0.8;">
                    <li>ì–´ê¹¨-í—ˆë¦¬-ê³¨ë°˜ì˜ ë„ˆë¹„ ë¹„ìœ¨ ì¸¡ì •</li>
                    <li>ì‹ ì²´ ë¬´ê²Œ ì¤‘ì‹¬ì˜ ìœ„ì¹˜ ë¶„ì„</li>
                    <li>ê³¨ê²©ì˜ ë„ë“œë¼ì§ ì •ë„ íŒë³„</li>
                </ul>
            </div>

            <button class="main-btn" onclick="goStep(2)">í…ŒìŠ¤íŠ¸ ì‹œì‘í•˜ê¸°</button>
        </div>
    </section>

    <!-- STEP 2: Upload & Analysis -->
    <section id="step2" class="step">
        <div class="card">
            <h1>ğŸ“¸ ì‚¬ì§„ ì—…ë¡œë“œ</h1>
            <p class="subtitle">ì •ë©´ìœ¼ë¡œ ì˜¬ë°”ë¥´ê²Œ ì„œ ìˆëŠ” ì „ì‹  ì‚¬ì§„ì„ ì„ íƒí•´ì£¼ì„¸ìš”</p>

            <div class="upload-zone" onclick="document.getElementById('fileInput').click()">
                <img id="previewImg" src="" alt="Preview">
                <div id="uploadUI">
                    <div style="font-size: 3rem; margin-bottom: 1rem;">ğŸ“¤</div>
                    <p>ì´ë¯¸ì§€ë¥¼ í´ë¦­í•˜ì—¬ ì—…ë¡œë“œ</p>
                    <p style="font-size: 0.7rem; opacity: 0.6;">* ì‚¬ì§„ì€ ë¶„ì„ ì§í›„ íŒŒê¸°ë©ë‹ˆë‹¤.</p>
                </div>
                <input type="file" id="fileInput" hidden accept="image/*" onchange="processImage(event)">
            </div>

            <div id="loadingUI" class="loading-container">
                <div class="spinner"></div>
                <p id="statusLog" class="log-text">ì´ë¯¸ì§€ ì „ì²˜ë¦¬ ì¤‘...</p>
            </div>
        </div>
    </section>

    <!-- STEP 3: Result -->
    <section id="step3" class="step">
        <div class="card">
            <h1>ğŸ“Š ì§„ë‹¨ ê²°ê³¼</h1>
            <div id="resultContent"></div>
            <div id="descriptionBox" class="desc-box"></div>
            <button class="main-btn" style="margin-top: 2rem; background: var(--text-color);" onclick="location.reload()">ë‹¤ì‹œ í…ŒìŠ¤íŠ¸í•˜ê¸°</button>
        </div>
    </section>

    <!-- Shared Footer -->
    <div class="footer-sections">
        <div class="card" style="padding: 1.5rem; margin-bottom: 2rem;">
            <h3 style="margin-top: 0;">ğŸ¤ ì œíœ´ ë¬¸ì˜</h3>
            <form action="https://formspree.io/f/xnjbbbzk" method="POST" style="text-align: left;">
                <input type="email" name="email" placeholder="ì´ë©”ì¼ ì£¼ì†Œ" required style="width: 100%; padding: 0.8rem; border-radius: 0.5rem; border: 1px solid var(--border-color); background: var(--bg-color); color: var(--text-color); margin-bottom: 10px; box-sizing: border-box;">
                <textarea name="message" placeholder="ë¬¸ì˜ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”" required style="width: 100%; padding: 0.8rem; border-radius: 0.5rem; border: 1px solid var(--border-color); background: var(--bg-color); color: var(--text-color); height: 80px; margin-bottom: 10px; box-sizing: border-box;"></textarea>
                <button type="submit" style="width: 100%; padding: 0.8rem; border-radius: 0.5rem; border: none; background: var(--primary); color: white; font-weight: 700; cursor: pointer;">ë¬¸ì˜ ì „ì†¡</button>
            </form>
        </div>
        <div id="disqus_thread"></div>
    </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@teachablemachine/image@latest/dist/teachablemachine-image.min.js"></script>

<script>
    const URL = "https://teachablemachine.withgoogle.com/models/r_j-J8oPR/";
    let model, maxPredictions;

    function goStep(num) {
        document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
        document.getElementById('step' + num).classList.add('active');
        window.scrollTo(0, 0);
    }

    async function loadModel() {
        if (model) return;
        const modelURL = URL + "model.json";
        const metadataURL = URL + "metadata.json";
        model = await tmImage.load(modelURL, metadataURL);
        maxPredictions = model.getTotalClasses();
    }

    async function processImage(event) {
        const input = event.target;
        if (!input.files[0]) return;

        const reader = new FileReader();
        reader.onload = async function(e) {
            document.getElementById('previewImg').src = e.target.result;
            document.getElementById('previewImg').style.display = 'block';
            document.getElementById('uploadUI').style.display = 'none';
            document.getElementById('loadingUI').style.display = 'block';

            // Fake logs for better UX based on user prompt logic
            const logs = [
                "ì´ë¯¸ì§€ ì „ì²˜ë¦¬ ì¤‘ (Segmentation)...",
                "ê³¨ê²© ëœë“œë§ˆí¬ ì¶”ì¶œ ì¤‘ (MediaPipe)...",
                "ì‹ ì²´ ë¶€ìœ„ë³„ ë¹„ìœ¨ ë°ì´í„° ì •ê·œí™” ì¤‘...",
                "ì²´í˜• íŒë³„ ì•Œê³ ë¦¬ì¦˜ ì ìš© ì¤‘..."
            ];
            
            for(let log of logs) {
                document.getElementById('statusLog').innerText = log;
                await new Promise(r => setTimeout(r, 800));
            }

            await loadModel();
            const tempImg = new Image();
            tempImg.src = e.target.result;
            tempImg.onload = async () => predict(tempImg);
        };
        reader.readAsDataURL(input.files[0]);
    }

    async function predict(img) {
        const prediction = await model.predict(img);
        const resultContainer = document.getElementById("resultContent");
        resultContainer.innerHTML = "";
        
        let topResult = { className: "", probability: 0 };

        for (let i = 0; i < maxPredictions; i++) {
            const prob = (prediction[i].probability * 100).toFixed(0);
            if (prediction[i].probability > topResult.probability) {
                topResult = prediction[i];
            }

            resultContainer.innerHTML += `
                <div class="prediction-item">
                    <div class="prediction-label">
                        <span>${prediction[i].className}</span>
                        <span>${prob}%</span>
                    </div>
                    <div class="progress-bg">
                        <div class="progress-fill" style="width: ${prob}%"></div>
                    </div>
                </div>
            `;
        }

        const descriptions = {
            "Straight": "<strong>ğŸ’ ìŠ¤íŠ¸ë ˆì´íŠ¸ ì²´í˜• ë¶„ì„ ê²°ê³¼:</strong><br>ìƒì²´ì— ë¬´ê²Œ ì¤‘ì‹¬ì´ ìˆìœ¼ë©° ëª©ì´ ë‹¤ì†Œ ì§§ê³  ê°€ìŠ´ ìœ„ì¹˜ê°€ ë†’ìŠµë‹ˆë‹¤. ì‹ ì²´ì— ë‘ê»˜ê°ì´ ìˆì–´ ì‹¬í”Œí•˜ê³  ê³ ê¸‰ìŠ¤ëŸ¬ìš´ ì§ì„ ì ì¸ ì•„ì´í…œì´ ì˜ ì–´ìš¸ë¦½ë‹ˆë‹¤. ë¸Œì´ë„¥ê³¼ íƒ„íƒ„í•œ ì†Œì¬ì˜ ìŠ¬ë™ìŠ¤ë¥¼ ì¶”ì²œí•©ë‹ˆë‹¤.",
            "Wave": "<strong>ğŸŒ¸ ì›¨ì´ë¸Œ ì²´í˜• ë¶„ì„ ê²°ê³¼:</strong><br>ìƒì²´ê°€ ê°€ëŠ˜ê³  í•˜ì²´ì— ë¬´ê²Œ ì¤‘ì‹¬ì´ ìˆëŠ” ê³¡ì„ ì ì¸ ë¼ì¸ì´ íŠ¹ì§•ì…ë‹ˆë‹¤. í—ˆë¦¬ì„ ì´ ë‚®ê³  ê¸¸ì–´ ë³´ì´ë¯€ë¡œ í•˜ì´ì›¨ì´ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ê³¼ í™”ë ¤í•œ ì¥ì‹ìœ¼ë¡œ ë³¼ë¥¨ê°ì„ ì£¼ëŠ” ìŠ¤íƒ€ì¼ë§ì´ ë² ìŠ¤íŠ¸ì…ë‹ˆë‹¤.",
            "Natural": "<strong>ğŸŒ¿ ë‚´ì¶”ëŸ´ ì²´í˜• ë¶„ì„ ê²°ê³¼:</strong><br>ì „ì²´ì ìœ¼ë¡œ ê³¨ê²©ì´ ë„ë“œë¼ì§€ë©° ì–´ê¹¨ê°€ ë°œë‹¬í•œ ì—­ì‚¼ê°í˜• ëŠë‚Œì„ ì¤ë‹ˆë‹¤. ê´€ì ˆ ë§ˆë””ê°€ êµµì€ í¸ì´ë¯€ë¡œ ì˜¤ë²„ì‚¬ì´ì¦ˆ í•ê³¼ ê±°ì¹œ ì§ˆê°ì˜ ì†Œì¬(ë¦¬ë„¨, ë°ë‹˜)ë¥¼ í™œìš©í•œ í¸ì•ˆí•˜ê³  ìŠ¤íƒ€ì¼ë¦¬ì‹œí•œ ë£©ì„ ì¶”ì²œí•©ë‹ˆë‹¤."
        };

        document.getElementById('descriptionBox').innerHTML = descriptions[topResult.className] || "ë¶„ì„ ì™„ë£Œ!";
        goStep(3);
    }

    function toggleTheme() {
        document.body.classList.toggle('dark-mode');
        localStorage.setItem('theme', document.body.classList.contains('dark-mode') ? 'dark' : 'light');
    }

    if (localStorage.getItem('theme') === 'dark') document.body.classList.add('dark-mode');
</script>

<script>
    (function() { 
        var d = document, s = d.createElement('script');
        s.src = 'https://product-builder-ayfw2rgli1.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
</body>
</html>
